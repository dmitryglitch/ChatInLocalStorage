(this.webpackJsonpuserchat=this.webpackJsonpuserchat||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a(32)},,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(3),c=a.n(r),o=a(1),i=a(6),l=(a(25),a(2)),u={isStorage:!1,chats:{id:0,chatName:"Question #1",idMember:1,messageList:[{text:"\u041f\u0440\u0438\u0432\u0435\u0442",idSender:1},{text:"\u0414\u0430\u0432\u0430\u0439 \u043f\u0440\u043e\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c \u043d\u0430\u0448 \u043d\u043e\u0432\u044b\u0439 \u0447\u0430\u0442 \u0434\u043b\u044f \u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441 \u0442\u0435\u0445.\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439?",idSender:1},{text:"\u0414\u0430\u0432\u0430\u0439 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u043c!",idSender:0}]},users:[{id:0,name:"Support Masha",avatarUrl:"https://cdn0.iconfinder.com/data/icons/user-pictures/100/supportfemale-2-512.png"},{id:1,name:"Dmitry Bykov",avatarUrl:"https://raw.githubusercontent.com/Ashwinvalento/cartoon-avatar/master/lib/images/female/68.png"}]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_LOCALSTORAGE":return Object(l.a)({},e,{isStorage:t.payload});case"INIT_STORE":return Object(l.a)({},e,{isStorage:!0,chats:t.payload.chats,users:t.payload.users});case"SEND_MESSAGE":return Object(l.a)({},e,{chats:Object(l.a)({},e.chats,{messageList:e.chats.messageList.concat(t.payload)})});default:return e}},_=Object(o.b)({localstorage:m}),h=a(4),p=a(5),d=a(8),g=a(7),S=(a(26),a(27),a(28),function(e){var t=e.chatName;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"chat__container__item__chatname"},s.a.createElement("p",{className:"chat__container__item__chatname__name"},t)))}),f=(a(29),function(e){var t=e.text,a=e.type,n=e.avatarUrl;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"left"===a?"chat__container__item__messagelist__message__left":"chat__container__item__messagelist__message__right"},s.a.createElement("div",{className:"chat__container__item__messagelist__message__avatar"},s.a.createElement("img",{src:n,alt:""})),s.a.createElement("div",{className:"chat__container__item__messagelist__message__text"},s.a.createElement("p",null," ",t," "))))}),E=(a(30),function(e){var t=e.messageList,a=e.userId,n=e.users;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"chat__container__item__messagelist"},t.map((function(e,t){return s.a.createElement(f,{key:t,type:a===e.idSender?"right":"left",text:e.text,idSender:e.idSender,avatarUrl:n[e.idSender].avatarUrl})}))))}),v=(a(31),function(e){var t=e.handleInput,a=e.handleKeyDown;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"chat__container__item__input"},s.a.createElement("input",{onChange:function(e){t(e.target.value)},onKeyDown:function(e){13===e.keyCode&&(e.target.value="",a())},type:"text"})))}),y=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={inputValue:""},e.handleInput=function(t){e.setState({inputValue:t})},e.handleKeyDown=function(){var t={text:e.state.inputValue,idSender:e.props.userId};e.props.onSendMessage(t.text,t.idSender);var a=JSON.parse(localStorage.getItem("chats"));a.messageList.push(t),localStorage.setItem("chats",JSON.stringify(a)),e.setState({inputValue:""})},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.users,a=e.userId,n=this.props.chats,r=n.messageList,c=n.chatName;return s.a.createElement(s.a.Fragment,null,s.a.createElement(S,{chatName:c}),s.a.createElement(E,{messageList:r,users:t,userId:a}),s.a.createElement(v,{handleInput:this.handleInput,handleKeyDown:this.handleKeyDown}))}}]),a}(n.Component),O=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.chats,a=e.users,n=e.onInitLocalStorage,s=e.onInitStore;null==localStorage.getItem("chats")?n(t,a):s(JSON.parse(localStorage.getItem("chats")),JSON.parse(localStorage.getItem("users")))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"chat"},s.a.createElement("div",{className:"chat__container"},s.a.createElement("div",{className:"chat__container__item user"},s.a.createElement(y,{type:"user",userId:this.props.users[1].id,chats:this.props.chats,users:this.props.users,onSendMessage:this.props.onSendMessage})),s.a.createElement("div",{className:"chat__container__item supporter"},s.a.createElement(y,{type:"supporter",userId:this.props.users[0].id,chats:this.props.chats,users:this.props.users,onSendMessage:this.props.onSendMessage})))))}}]),a}(n.Component),I=Object(i.b)((function(e){return{chats:e.localstorage.chats,users:e.localstorage.users}}),(function(e){return{onInitLocalStorage:function(t,a){e(function(e,t){return localStorage.setItem("chats",JSON.stringify(e)),localStorage.setItem("users",JSON.stringify(t)),{type:"INIT_LOCALSTORAGE",payload:!0}}(t,a))},onInitStore:function(t,a){e(function(e,t){return{type:"INIT_STORE",payload:{chats:e,users:t}}}(t,a))},onSendMessage:function(t,a){e(function(e,t){return{type:"SEND_MESSAGE",payload:{text:e,idSender:t}}}(t,a))}}}))(O);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=Object(o.c)(_,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),b=document.getElementById("root");c.a.render(s.a.createElement(i.a,{store:N},s.a.createElement(I,null)),b),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.e77596e6.chunk.js.map